/*!
jquery.event.drag.js ~ v1.6 ~ Copyright (c) 2008, Three Dub Media (http://threedubmedia.com)
Liscensed under the MIT License ~ http://threedubmedia.googlecode.com/files/MIT-LICENSE.txt
*/
!function(e){e.fn.drag=function(e,t,r){return t&&this.bind("dragstart",e),r&&this.bind("dragend",r),e?this.bind("drag",t||e):this.trigger("drag")};var t=e.event,r=t.special,a=r.drag={not:":input",distance:0,which:1,drop:!1,dragging:!1,setup:function(r){(r=e.extend({distance:a.distance,which:a.which,not:a.not,drop:a.drop},r||{})).distance=d(r.distance),t.add(this,"mousedown",n,r),this.attachEvent&&this.attachEvent("ondragstart",g)},teardown:function(){t.remove(this,"mousedown",n),this===a.dragging&&(a.dragging=a.proxy=!1),s(this,!0),this.detachEvent&&this.detachEvent("ondragstart",g)}};function n(g){var i,u=this,c=g.data||{};if(c.elem)u=g.dragTarget=c.elem,g.dragProxy=a.proxy||u,g.cursorOffsetX=c.pageX-c.left,g.cursorOffsetY=c.pageY-c.top,g.offsetX=g.pageX-g.cursorOffsetX,g.offsetY=g.pageY-g.cursorOffsetY;else if(a.dragging||c.which>0&&g.which!=c.which||e(g.target).is(c.not))return;switch(g.type){case"mousedown":e.extend(c,e(u).offset(),{elem:u,target:g.target,pageX:g.pageX,pageY:g.pageY}),t.add(document,"mousemove mouseup",n,c),s(u,!1),a.dragging=null;break;case!a.dragging&&"mousemove":if(d(g.pageX-c.pageX)+d(g.pageY-c.pageY)<c.distance)break;g.target=c.target,!1!==(i=o(g,"dragstart",u))&&(a.dragging=u,a.proxy=g.dragProxy=e(i||u)[0]);case"mousemove":if(a.dragging){if(i=o(g,"drag",u),c.drop&&r.drop&&(r.drop.allowed=!1!==i,r.drop.handler(g)),!1!==i)break;g.type="mouseup"}case"mouseup":t.remove(document,"mousemove mouseup",n),a.dragging&&(c.drop&&r.drop&&r.drop.handler(g),o(g,"dragend",u)),s(u,!0),a.dragging=a.proxy=c.elem=!1}}function o(t,r,a){t.type=r;var n=(e.event.dispatch||e.event.handle).call(a,t);return!1!==n&&(n||t.result)}function d(e){return Math.pow(e,2)}function g(){return!1===a.dragging}function s(t,r){t&&((t=t.ownerDocument?t.ownerDocument:t).unselectable=r?"off":"on",t.style&&(t.style.MozUserSelect=r?"":"none"),e.event[r?"remove":"add"](t,"selectstart mousedown",g))}r.dragstart=r.dragend={setup:function(){},teardown:function(){}}}(jQuery);